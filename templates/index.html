<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebHawk | Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Sidebar -->
<div id="sidebar" class="sidebar">
    <h2 class="logo">WebHawk</h2>
    <a href="{{ url_for('index') }}">Home</a>
    <a href="{{ url_for('about') }}">About</a>
</div>

<!-- Menu & Dark Mode -->
<span id="menu-toggle" onclick="toggleMenu()">☰</span>
<span id="theme-toggle" onclick="toggleDarkMode()">⏾</span>

<div class="main-content">
    <div class="container">
        <h1>WebHawk</h1>
        <p class="tagline">Eyes on every link</p>
        <p class="description">Detect phishing and fake websites in real time by analyzing URL patterns.</p>

        <!-- URL Input Form -->
        <form method="POST">
            <input type="text" name="url" placeholder="Enter website URL" required>
            <button type="submit">Check Website</button>
        </form>

        <!-- Result Box -->
        {% if result %}
        <div class="result-box {% if 'PHISHING' in result or 'INVALID' in result %}danger{% else %}safe{% endif %}">
            <h3>{{ result }}</h3>
            {% if risk %}<p class="risk">Risk Level: <b>{{ risk }}</b></p>{% endif %}
            {% if reasons %}
                <div class="reason-container">
                {% for reason in reasons %}
                    <span class="reason-badge danger">{{ reason }}</span>
                {% endfor %}
                </div>
            {% endif %}
        </div>
        {% endif %}

        <!-- History -->
        {% if history %}
        <div class="history">
            <h4>Recent URL History</h4>
            <ul>
                {% for item in history %}
                <li>
                    <b>{{ item.url }}</b> → {{ item.result }}
                    {% if item.risk %} ({{ item.risk }}) {% endif %}
                    {% if item.reasons %}
                        <div class="reason-container">
                        {% for r in item.reasons %}
                            <span class="reason-badge danger">{{ r }}</span>
                        {% endfor %}
                        </div>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
            <form method="POST" action="{{ url_for('clear_history') }}">
                <button class="clear-history" type="submit">Clear History</button>
            </form>
        </div>
        {% endif %}

        <footer>WebHawk | Phishing and Fake Detection System</footer>
    </div>
</div>

<script>
function toggleMenu() { document.getElementById("sidebar").classList.toggle("active"); }
function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem("darkMode", document.body.classList.contains("dark-mode"));
}
window.onload = function() {
    if (localStorage.getItem("darkMode") === "true") document.body.classList.add("dark-mode");
};
</script>
</body>
</html>
